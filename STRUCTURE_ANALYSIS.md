# üìä –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ Cyoda SaaS Platform

## ‚úÖ –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ - –í–ï–†–ù–ê–Ø

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–º–æ–Ω–æ—Ä–µ–ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** —Å Yarn workspaces, —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–æ–¥—Ö–æ–¥–æ–º.

```
cyoda-saas-platform/
‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îî‚îÄ‚îÄ saas-app/              # üéØ –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–ø–æ—Ä—Ç 3000)
‚îú‚îÄ‚îÄ packages/                  # üì¶ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞–∫–µ—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ ui-lib-react/         # –û–±—â–∏–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ http-api-react/       # HTTP API + Entity Viewer
‚îÇ   ‚îú‚îÄ‚îÄ cyoda-sass-react/     # Trino SQL schemas
‚îÇ   ‚îú‚îÄ‚îÄ tableau-react/        # Reporting
‚îÇ   ‚îú‚îÄ‚îÄ statemachine-react/   # Workflow & Lifecycle
‚îÇ   ‚îú‚îÄ‚îÄ tasks-react/          # Task management
‚îÇ   ‚îú‚îÄ‚îÄ processing-manager-react/  # Processing nodes
‚îÇ   ‚îú‚îÄ‚îÄ cobi-react/           # Data mapping (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îÇ   ‚îî‚îÄ‚îÄ source-configuration-react/  # Source config (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îú‚îÄ‚îÄ tools/                     # üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ scripts/                   # üîß –°–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏
‚îú‚îÄ‚îÄ e2e/                      # üß™ E2E —Ç–µ—Å—Ç—ã
‚îî‚îÄ‚îÄ docs/                     # üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—É—Ç–∞–Ω–∏—Ü–∞: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ .env —Ñ–∞–π–ª—ã

### –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:

–£ –≤–∞—Å –µ—Å—Ç—å **3 —É—Ä–æ–≤–Ω—è** –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:

#### **–£—Ä–æ–≤–µ–Ω—å 1: –ö–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è**
```
/
‚îú‚îÄ‚îÄ .env.template                    # –®–∞–±–ª–æ–Ω –¥–ª—è –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤
‚îî‚îÄ‚îÄ .env.development.local           # –í–∞—à –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ (–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è saas-app!)
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ `.env.development.local` (–∫–æ—Ä–µ–Ω—å):**
```bash
VITE_APP_API_BASE=http://localhost:8082/api
VITE_APP_API_BASE_PROCESSING=http://localhost:8081/processing
VITE_APP_BASE_URL=http://localhost:8081/
```
‚ö†Ô∏è **–≠—Ç–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ backend, –∫–æ—Ç–æ—Ä—ã–π –ù–ï –∑–∞–ø—É—â–µ–Ω!**

#### **–£—Ä–æ–≤–µ–Ω—å 2: apps/saas-app/**
```
apps/saas-app/
‚îú‚îÄ‚îÄ .env.example                     # –®–∞–±–ª–æ–Ω –¥–ª—è saas-app
‚îú‚îÄ‚îÄ .env                            # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥ (–ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø!)
‚îî‚îÄ‚îÄ .env.development.local          # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ `apps/saas-app/.env` (–ê–ö–¢–ò–í–ù–´–ô):**
```bash
VITE_APP_API_BASE=/api
VITE_APP_API_BASE_PROCESSING=
VITE_APP_BASE_URL=https://cyoda-develop.kube3.cyoda.org/
```
‚úÖ **–≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–∫—Å–∏!**

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ `apps/saas-app/.env.development.local`:**
```bash
VITE_FEATURE_FLAG_USE_MODELS_INFO=true
```
‚úÖ **Feature flags - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**

#### **–£—Ä–æ–≤–µ–Ω—å 3: –û—Ç–¥–µ–ª—å–Ω—ã–µ –ø–∞–∫–µ—Ç—ã**
```
packages/cobi-react/.env.template
packages/cobi-react/.env.development.local
packages/tasks-react/.env.development
packages/tableau-react/.env.development
```
‚ö†Ô∏è **–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ standalone –∑–∞–ø—É—Å–∫–µ –ø–∞–∫–µ—Ç–æ–≤**

---

## üéØ –ö–∞–∫–∏–µ —Ñ–∞–π–ª—ã —Ä–µ–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è SaaS App?

### –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ `npm run dev` (–∏–∑ –∫–æ—Ä–Ω—è):

**Vite –∑–∞–≥—Ä—É–∂–∞–µ—Ç .env —Ñ–∞–π–ª—ã –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞:**

1. **`apps/saas-app/.env.development.local`** - –Ω–∞–∏–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è)
2. **`apps/saas-app/.env.development`** - –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
3. **`apps/saas-app/.env.local`** - –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
4. **`apps/saas-app/.env`** - –±–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- `.env.development.local` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
- `.env.template` (—ç—Ç–æ —Ç–æ–ª—å–∫–æ —à–∞–±–ª–æ–Ω—ã)
- `.env` —Ñ–∞–π–ª—ã –∏–∑ packages/* (–æ–Ω–∏ –¥–ª—è standalone —Ä–µ–∂–∏–º–∞)

---

## üîç –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–Ω—Ñ–ª–∏–∫—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

### –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:

**–ö–æ—Ä–Ω–µ–≤–æ–π `.env.development.local`:**
```bash
VITE_APP_API_BASE=http://localhost:8082/api  # ‚ùå –õ–æ–∫–∞–ª—å–Ω—ã–π backend (–Ω–µ –∑–∞–ø—É—â–µ–Ω)
```

**`apps/saas-app/.env`:**
```bash
VITE_APP_API_BASE=/api  # ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å Vite proxy
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** SaaS app –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `apps/saas-app/.env`, –ø–æ—ç—Ç–æ–º—É –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

–ù–æ –∫–æ—Ä–Ω–µ–≤–æ–π `.env.development.local` –º–æ–∂–µ—Ç –≤–≤–æ–¥–∏—Ç—å –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (—Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –º–æ–∂–µ—Ç –ø—É—Ç–∞—Ç—å)

**–û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å**, –Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:

```bash
# /.env.development.local
# ‚ö†Ô∏è WARNING: This file is NOT used by apps/saas-app!
# This is for standalone package development only.
# For SaaS app configuration, edit apps/saas-app/.env
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –£–ø—Ä–æ—Å—Ç–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–£–¥–∞–ª–∏—Ç—å** –∫–æ—Ä–Ω–µ–≤–æ–π `.env.development.local` –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ:

```
apps/saas-app/.env              # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
apps/saas-app/.env.local        # –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (–≤ .gitignore)
```

---

## üìù –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π .env
cat apps/saas-app/.env
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```bash
VITE_APP_API_BASE=/api
VITE_APP_API_BASE_PROCESSING=
VITE_APP_BASE_URL=https://cyoda-develop.kube3.cyoda.org/
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
yarn install
# –∏–ª–∏
npm install
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```bash
npm run dev
```

### –®–∞–≥ 4: –û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä

```
http://localhost:3000
```

---

## üîß –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–æ–∫—Å–∏

**Vite proxy** (–Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ `apps/saas-app/vite.config.ts`):

```typescript
proxy: {
  '/api': {
    target: 'https://cyoda-develop.kube3.cyoda.org',
    changeOrigin: true,
  },
  '/platform-api': {
    target: 'https://cyoda-develop.kube3.cyoda.org',
    changeOrigin: true,
  },
  '/platform-processing': {
    target: 'https://cyoda-develop.kube3.cyoda.org/api',
    changeOrigin: true,
  },
}
```

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

1. Frontend –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å: `GET /api/some-endpoint`
2. Vite –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å
3. Vite –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –Ω–∞: `https://cyoda-develop.kube3.cyoda.org/api/some-endpoint`
4. Backend –æ—Ç–≤–µ—á–∞–µ—Ç
5. Vite –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç frontend

**–ü–æ—ç—Ç–æ–º—É:**
- `VITE_APP_API_BASE=/api` - –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å)
- `VITE_APP_API_BASE=http://localhost:8082/api` - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (–æ–±—Ö–æ–¥–∏—Ç –ø—Ä–æ–∫—Å–∏)

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π –≤—ã–≤–æ–¥

### ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ - –í–ï–†–ù–ê–Ø

### ‚ö†Ô∏è –ù–æ –µ—Å—Ç—å –ø—É—Ç–∞–Ω–∏—Ü–∞ —Å .env —Ñ–∞–π–ª–∞–º–∏:

1. **–ö–æ—Ä–Ω–µ–≤–æ–π `.env.development.local`** - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SaaS app, –º–æ–∂–µ—Ç –≤–≤–æ–¥–∏—Ç—å –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ
2. **`apps/saas-app/.env`** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. **Vite proxy** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### üîß –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

**–û–ø—Ü–∏—è A (–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è):** –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ—Ä–Ω–µ–≤–æ–π `.env.development.local`

**–û–ø—Ü–∏—è B (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):** –£–¥–∞–ª–∏—Ç—å –∫–æ—Ä–Ω–µ–≤–æ–π `.env.development.local` –∏–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –≤ `.env.development.local.example`

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ü–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ .env —Ñ–∞–π–ª–æ–≤ –≤ Vite:

```
.env.development.local  (–Ω–∞–∏–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
.env.local
.env.development
.env
```

### –ì–¥–µ –∏—Å–∫–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤:

| –†–µ–∂–∏–º | –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ |
|-------|-------------------|
| SaaS App (dev) | `apps/saas-app/.env` |
| SaaS App (local override) | `apps/saas-app/.env.development.local` |
| Standalone package | `packages/*/env.development.local` |
| Production build | `apps/saas-app/.env.production` |

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π)

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
yarn install

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
cat apps/saas-app/.env

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
npm run dev

# 4. –û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä
# http://localhost:3000
```

**–í–æ—Ç –∏ –≤—Å—ë!** –ù–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö .env —Ñ–∞–π–ª–æ–≤ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ.

