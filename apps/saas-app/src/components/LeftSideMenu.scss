// Refine.dev Enterprise Theme - Left Side Menu

// IMPORTANT: Hide ALL popup submenus - we want inline submenu only
.ant-menu-submenu-popup {
  display: none !important;
}

// Custom collapsed menu styles (when Menu has menu-collapsed class)
.ant-menu.menu-collapsed {
  .ant-menu-item {
    margin: 4px 0 !important;
    padding: 0 !important;
    width: 80px !important;
    height: 40px !important;
    line-height: 40px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    text-align: center !important;
  }

  .ant-menu-submenu {
    margin: 4px 0 !important;
    width: 80px !important;

    // FORCE submenu to show inline when open
    &.ant-menu-submenu-open {
      > .ant-menu-sub {
        display: block !important;
        position: relative !important;
        left: 0 !important;
        top: 0 !important;
        transform: none !important;
        opacity: 1 !important;
        visibility: visible !important;
        pointer-events: auto !important;
      }
    }
  }

  .ant-menu-submenu-title {
    margin: 0 !important;
    padding: 0 !important;
    width: 80px !important;
    height: 40px !important;
    line-height: 40px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    text-align: center !important;
  }

  .ant-menu-item-icon,
  .anticon {
    font-size: 16px !important;
    margin: 0 !important;
  }

  // Submenu items - FORCE show inline with smaller icons
  .ant-menu-sub {
    background: transparent !important;
    padding: 0 !important;
    width: 80px !important;
    // FORCE inline display - override Ant Design's popup behavior
    display: block !important;
    position: relative !important;
    left: 0 !important;
    top: 0 !important;
    transform: none !important;
    opacity: 1 !important;
    visibility: visible !important;
    pointer-events: auto !important;
    max-height: none !important;
    overflow: visible !important;

    .ant-menu-item {
      margin: 2px 0 !important;
      padding: 0 !important;
      width: 80px !important;
      height: 40px !important;
      line-height: 40px !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      position: relative !important;

      &::before {
        content: '' !important;
        display: block !important;
        width: 4px !important;
        height: 4px !important;
        border-radius: 50% !important;
        background-color: rgba(255, 255, 255, 0.45) !important;
        position: absolute !important;
        left: 14px !important;
        top: 50% !important;
        transform: translateY(-50%) !important;
      }

      &.ant-menu-item-selected::before {
        background-color: #1890ff !important;
        width: 6px !important;
        height: 6px !important;
      }

      .anticon {
        font-size: 14px !important;
      }
    }
  }

  // Hide text in collapsed state
  .ant-menu-title-content {
    display: none !important;
    opacity: 0;
    width: 0;
  }

  // Hide submenu arrow
  .ant-menu-submenu-arrow {
    display: none !important;
  }
}

// Popup submenu styling (for collapsed sidebar) - DISABLED, we use inline instead
// .ant-menu-submenu-popup {
//   .ant-menu {
//     background: var(--refine-bg-secondary) !important;
//     border-radius: 8px;
//     padding: 8px;
//     box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
//     backdrop-filter: blur(20px);
//     -webkit-backdrop-filter: blur(20px);
//   }

//   .ant-menu-item {
//     border-radius: 8px;
//     margin: 4px 0 !important;
//     transition: all var(--refine-transition-base);

//     &.ant-menu-item-selected {
//       background: linear-gradient(135deg, #00d4aa 0%, #4d9fff 100%) !important;
//       color: white !important;
//       font-weight: 600;
//       box-shadow: var(--refine-shadow-md);

//       .anticon {
//         color: white !important;
//       }
//     }

//     &:hover:not(.ant-menu-item-selected) {
//       background: var(--refine-glass-bg) !important;
//       color: var(--refine-text-primary) !important;

//       .anticon {
//         color: var(--refine-primary-light) !important;
//       }
//     }
//   }
// }

.saas-left-side-menu {
  background: var(--refine-bg-secondary) !important;
  border-right: none !important;

  // Glassmorphism effect
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);

  // Theme menu item styling
  .ant-menu-item[data-menu-id$="-theme"] {
    cursor: pointer !important;

    .ant-menu-title-content {
      width: 100%;

      > div {
        width: 100%;
      }
    }

    .ant-switch {
      &.ant-switch-checked {
        background-color: #1DD1FF !important;
      }

      &:not(.ant-switch-checked) {
        background-color: #14b8a6 !important;
      }

      &:hover:not(.ant-switch-disabled) {
        &.ant-switch-checked {
          background-color: #4DDBFF !important;
        }

        &:not(.ant-switch-checked) {
          background-color: #2dd4bf !important;
        }
      }
    }
  }

  // Logo container at the top of sidebar - center it vertically
  .sidebar-logo-container {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px 16px;
    min-height: 64px;
    border-bottom: 1px solid var(--refine-border-primary);
    transition: border-color var(--refine-transition-base);

    svg {
      display: block;
      margin: 0 auto;
    }
  }

  // Custom scrollbar for sidebar
  &::-webkit-scrollbar {
    width: 3px;
  }

  &::-webkit-scrollbar-track {
    background: transparent;
  }

  &::-webkit-scrollbar-thumb {
    background: rgba(0, 212, 170, 0.4);
    border-radius: 2px;
  }

  // Remove default menu borders and padding
  .ant-menu {
    border: none !important;
    background: transparent !important;
  }

  .ant-menu-inline {
    border-right: none !important;
  }

  // Menu items styling
  .ant-menu-item {
    border-radius: 8px;
    margin: 4px 8px !important;
    padding-left: 16px !important;
    padding-right: 16px !important;
    transition: all var(--refine-transition-base);
    border: none !important;
    height: 40px !important;
    line-height: 40px !important;

    &.ant-menu-item-selected {
      background: linear-gradient(135deg, #00d4aa 0%, #4d9fff 100%) !important;
      color: white !important;
      font-weight: 600;
      box-shadow: var(--refine-shadow-md);

      .anticon {
        color: white !important;
      }
    }

    &:hover:not(.ant-menu-item-selected) {
      background: var(--refine-glass-bg) !important;
      color: var(--refine-text-primary) !important;

      .anticon {
        color: var(--refine-primary-light) !important;
      }
    }

    &.ant-menu-item-danger {
      color: #ff4d4f;

      &:hover {
        background: rgba(255, 77, 79, 0.15) !important;
        color: #ff6b6b !important;
      }

      &.ant-menu-item-selected {
        background: linear-gradient(135deg, #ff4d4f 0%, #ff6b6b 100%) !important;
        color: white !important;
      }
    }

    .anticon {
      font-size: 16px;
      transition: all var(--refine-transition-base);
    }
  }

  // Submenu container
  .ant-menu-submenu {
    border-radius: 8px;
    margin: 4px 8px !important;
    border: none !important;
  }

  // Submenu title styling
  .ant-menu-submenu-title {
    border-radius: 8px;
    margin: 0 !important;
    padding-left: 16px !important;
    padding-right: 16px !important;
    height: 40px !important;
    line-height: 40px !important;
    transition: all var(--refine-transition-base);
    border: none !important;

    &:hover {
      background: var(--refine-glass-bg) !important;
      color: var(--refine-text-primary) !important;

      .anticon {
        color: var(--refine-primary-light) !important;
      }
    }

    .anticon {
      font-size: 16px;
      transition: all var(--refine-transition-base);
    }
  }

  .ant-menu-sub {
    background: transparent !important;
    border: none !important;

    .ant-menu-item {
      padding-left: 48px !important;
      margin: 2px 8px !important;
      border: none !important;

      &::before {
        content: '';
        position: absolute;
        left: 32px;
        top: 50%;
        transform: translateY(-50%);
        width: 4px;
        height: 4px;
        border-radius: 50%;
        background: var(--refine-text-tertiary);
        transition: all var(--refine-transition-base);
      }

      // Submenu icons are smaller than parent menu icons
      .anticon {
        font-size: 14px !important;
        transition: all var(--refine-transition-base);
      }

      &.ant-menu-item-selected {
        background: linear-gradient(135deg, #00d4aa 0%, #4d9fff 100%) !important;
        color: white !important;
        font-weight: 600;
        box-shadow: var(--refine-shadow-md);

        &::before {
          background: white;
          width: 6px;
          height: 6px;
        }

        .anticon {
          color: white !important;
        }
      }

      &:hover:not(.ant-menu-item-selected) {
        background: var(--refine-glass-bg) !important;
        color: var(--refine-text-primary) !important;

        &::before {
          background: var(--refine-primary-light);
          width: 6px;
          height: 6px;
        }

        .anticon {
          color: var(--refine-primary-light) !important;
        }
      }
    }
  }

  .ant-menu-item-divider {
    margin: 12px 16px;
    background: var(--refine-border-primary);
    height: 1px;
  }

  // Custom collapse trigger button
  .sidebar-collapse-trigger {
    background: var(--refine-bg-tertiary);

    .ant-btn {
      transition: all var(--refine-transition-base);

      &:hover {
        background: var(--refine-primary) !important;
        color: white !important;
      }
    }
  }

  // Collapsed state adjustments
  &.ant-layout-sider-collapsed {
    .ant-menu-item {
      margin: 4px 0 !important;
      padding: 0 !important;
      width: 80px !important;
      height: 40px !important;
      line-height: 40px !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      text-align: center !important;
    }

    .ant-menu-submenu {
      margin: 4px 0 !important;
      width: 80px !important;

      // HIDE submenu by default
      > .ant-menu-sub {
        display: none !important;
      }

      // FORCE submenu to show inline when open
      &.ant-menu-submenu-open {
        > .ant-menu-sub {
          display: block !important;
          position: relative !important;
          left: 0 !important;
          top: 0 !important;
          transform: none !important;
          opacity: 1 !important;
          visibility: visible !important;
          pointer-events: auto !important;
        }
      }
    }

    .ant-menu-submenu-title {
      margin: 0 !important;
      padding: 0 !important;
      width: 80px !important;
      height: 40px !important;
      line-height: 40px !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      text-align: center !important;
    }

    .ant-menu-item-icon,
    .anticon {
      font-size: 16px !important;
      margin: 0 !important;
    }

    // Submenu items in collapsed mode - FORCE show inline with smaller icons
    .ant-menu-sub {
      background: transparent !important;
      padding: 0 !important;
      width: 80px !important;
      // FORCE inline display - override Ant Design's popup behavior
      display: block !important;
      position: relative !important;
      left: 0 !important;
      top: 0 !important;
      transform: none !important;
      opacity: 1 !important;
      visibility: visible !important;
      pointer-events: auto !important;
      max-height: none !important;
      overflow: visible !important;

      .ant-menu-item {
        margin: 2px 0 !important;
        padding: 0 !important;
        width: 80px !important;
        height: 40px !important;
        line-height: 40px !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        position: relative !important;

        // Add dot indicator for submenu items
        &::before {
          content: '' !important;
          display: block !important;
          width: 4px !important;
          height: 4px !important;
          border-radius: 50% !important;
          background-color: rgba(255, 255, 255, 0.45) !important;
          position: absolute !important;
          left: 14px !important;
          top: 50% !important;
          transform: translateY(-50%) !important;
        }

        &.ant-menu-item-selected::before {
          background-color: #1890ff !important;
          width: 6px !important;
          height: 6px !important;
        }

        .anticon {
          font-size: 14px !important;
          margin: 0 !important;
        }
      }
    }

    // Hide text in collapsed state
    .ant-menu-title-content {
      display: none !important;
      opacity: 0;
      width: 0;
    }

    // Center the expand/collapse arrow for submenus
    .ant-menu-submenu-arrow {
      display: none !important;
    }

    .sidebar-collapse-trigger {
      .ant-btn {
        display: flex;
        align-items: center;
        justify-content: center;
      }
    }
  }
}

// Light theme specific styles for sidebar
[data-theme="light"] {
  .saas-left-side-menu {
    background: #F9FAFB !important; // Slightly gray background to distinguish from content
    box-shadow: 1px 0 3px rgba(0, 0, 0, 0.05);

    .sidebar-logo-container {
      border-bottom: 1px solid rgba(0, 0, 0, 0.08);
    }

    &::-webkit-scrollbar-thumb {
      background: rgba(0, 212, 170, 0.3);
    }

    &::-webkit-scrollbar-thumb:hover {
      background: rgba(0, 212, 170, 0.5);
    }

    // Menu items - make text more readable
    .ant-menu-item {
      color: #4B5563 !important;

      .anticon {
        color: #6B7280 !important;
      }

      &.ant-menu-item-selected {
        color: #FFFFFF !important;

        .anticon {
          color: #FFFFFF !important;
        }
      }

      &:hover:not(.ant-menu-item-selected) {
        color: #111827 !important;

        .anticon {
          color: #00D4AA !important;
        }
      }
    }

    // Submenu items
    .ant-menu-submenu-title {
      color: #4B5563 !important;

      .anticon {
        color: #6B7280 !important;
      }

      &:hover {
        color: #111827 !important;

        .anticon {
          color: #00D4AA !important;
        }
      }
    }

    // Logout button
    .ant-menu-item-danger {
      color: #EF4444 !important;

      .anticon {
        color: #EF4444 !important;
      }
    }
  }
}

// Version Info Modal Styling
.detail-tree-item {
  margin-bottom: 16px;

  .title-value {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    background: var(--refine-glass-bg);
    border: 1px solid var(--refine-border-primary);
    border-radius: 8px;
    transition: all var(--refine-transition-base);

    &:hover {
      background: rgba(99, 102, 241, 0.1);
      border-color: rgba(99, 102, 241, 0.3);
    }

    .name {
      font-weight: 600;
      color: var(--refine-text-secondary);
      min-width: 140px;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .value {
      color: var(--refine-text-primary);
      flex: 1;
      text-align: right;
      font-family: 'Fira Code', monospace;
      font-size: 13px;
    }
  }
}

